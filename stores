<script src="http://kodekloud.s3.amazonaws.com/sites/5438407c6e6f64462d020000/92b82a88144a6207ab1a5e8e0f63d3d1/craftmap.js"></script>
<div class="content_container main_container">
    <div id="map">
        <img alt="map" src="http://cdn.mallmaverick.com/system/properties/maps/000/000/007/original/VA_Gateway_Map_2000x2000-FINAL.jpg?1367431992" />
    </div>
    <h2 class="stores_main_heading">Shop & Entertainment</h2>
    <p class="store_main_desc">explore • enjoy • shop</p>
    
    <div class="row">
        <div class="col-md-12">
            <div class="alpha_list">
                <a href="#7">all</a>
                <a href="#7">#</a>
                <a href="#A">A</a>
                <a href="#B">B</a>
                <a href="#C">C</a>
                <a href="#D">D</a>
                <a href="#E">E</a>
                <a href="#F">F</a>
                <a href="#G">G</a>
                <a href="#H">H</a>
                <a href="#I">I</a>
                <a href="#J">J</a>
                <a href="#K">K</a>
                <a href="#L">L</a>
                <a href="#M">M</a>
                <a href="#N">N</a>
                <a href="#O">O</a>
                <a href="#P">P</a>
                <a href="#Q">Q</a>
                <a href="#R">R</a>
                <a href="#S">S</a>
                <a href="#T">T</a>
                <a href="#U">U</a>
                <a href="#V">V</a>
                <a href="#W">W</a>
                <a href="#X">X</a>
                <a href="#Y">Y</a>
                <a href="#Z">Z</a>
            </div>
        </div>
        <div class="col-md-8">
            
            <h5 class="category_header" style="display:none" id="cat_name_header">All</h5>
            <div class="store_list" id="store_list_container">
                <script id="store_list_template" type="x-tmpl-mustache/text">
                    <div class="store_list_content cats_row" data-cat="{{cat_list}}">
                        <p class="store_initial" style="{{show}}" id="{{initial}}">{{initial}}</p>
                        <p class="store_name"><a href="/stores/{{slug}}">{{name}}</a></p>
                    </div>
                </script>
            </div>
        </div>
        <div class="col-md-4">
            <div id="new_stores">
                <p class="category_header">New Stores</p>
                <div id="new_store_container">
                    <script id="new_store_template" type="x-tmpl-mustache/text">
                        <h5 class="category_name"><a href="#">{{name}}</a></h5>    
                    </script>
                </div>
            </div>
            <div id="coming_soon_stores">
                <p class="category_header">Opening Soon</p>
                <div id="new_store_container">
                    <script id="new_store_template" type="x-tmpl-mustache/text">
                        <h5 class="category_name"><a href="#">{{name}}</a></h5>    
                    </script>
                </div>
            </div>
            <p class="category_header">Categories</p>
            <h5 class="category_name active_cat hidden_phone"><a href="#" class="show_all_stores">All</a></h5>
            <div id="category_container" class="hidden_phone">
                <script id="category_template" type="x-tmpl-mustache/text">
                    <h5 class="category_name"><a href="#" class="show_cat_stores" data-id="{{id}}">{{name}}</a></h5>    
                </script>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(e){
        init(e);
        function renderAll (){
            var categories = getStoreCategories();
            var stores = getStoresList(); 
            renderStoreList('#store_list_container','#store_list_template', stores, "A", "Z");
            renderGeneral('#category_container', '#category_template', categories);
            show_cat_stores();
            var coming_soon_stores = getComingSoonList();
            var new_stores = getNewStoresList();
            
            if (new_stores.length > 0){
                renderGeneral("#new_store_container","#new_store_template", new_stores);
            }
            else{
                $('#new_stores').hide();
            }
        }
        
        $('#map').craftmap({
			image: {
				width: 850,
				height: 850,
			},
			map: {
				position: 'center'
			}
		});
		loadMallDataCached(renderAll); 
    })
</script>